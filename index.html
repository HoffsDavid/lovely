<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Lowlify</title>
    <link rel="icon" type="image/png" href="img/icon.png" />
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      // Configura√ß√£o do Tailwind CSS - Edite aqui para personalizar
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              // Adicione suas cores customizadas aqui
              // Exemplo: 'minha-cor': '#FF5733',
            },
            spacing: {
              // Adicione espa√ßamentos customizados aqui
              // Exemplo: '128': '32rem',
            },
            fontFamily: {
              // Adicione fontes customizadas aqui
              // Exemplo: 'custom': ['Nome da Fonte', 'sans-serif'],
            },
            // Outras personaliza√ß√µes podem ser adicionadas aqui
          },
        },
      };
    </script>
    <style>
      * {
        box-sizing: border-box;
      }
      html {
        height: 100%;
      }
      html,
      body,
      #root {
        width: 100dvw !important;
        max-width: 100dvw !important;
        overflow-x: hidden;
        min-height: 100%;
        margin: 0;
        padding: 0;
      }
      body {
        margin: 0;
        padding: 0;
        min-height: 100%;
        background: linear-gradient(
          135deg,
          #0a0515 0%,
          #0d0a1a 50%,
          #050510 100%
        );
        color: #f6e6ff;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
          Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
          "Segoe UI Emoji";
        background-color: #000;
      }
      #root {
        height: 100%;
      }
      .relationship-counter-grid {
        display: grid !important;
        grid-template-columns: 1fr 1fr !important;
        gap: 1rem !important;
        width: 100% !important;
        max-width: 28rem !important;
        margin: 0 auto !important;
      }
      .relationship-counter-container {
        margin-bottom: 6rem !important;
        padding-bottom: 2rem !important;
      }
      @media (max-width: 768px) {
        .relationship-counter-container {
          width: 85% !important;
          max-width: 320px !important;
        }
        .relationship-counter-grid {
          gap: 0.5rem !important;
          max-width: 100% !important;
        }
        .relationship-counter-container > div {
          padding: 0.75rem !important;
        }
        .relationship-counter-container h3 {
          font-size: 1.5rem !important;
          margin-bottom: 0.75rem !important;
        }
        .relationship-counter-grid > div > div:first-child {
          font-size: 2.25rem !important;
        }
        .relationship-counter-grid > div > div:last-child {
          font-size: 1rem !important;
        }
        .relationship-counter-container > div > div:last-child {
          font-size: 1rem !important;
        }
      }
      .card-model-a {
        box-sizing: border-box;
        max-width: 100vw;
        overflow-x: hidden;
        min-height: 100%;
        flex: 1;
      }
      .card-model-a h1 {
        word-wrap: normal;
        overflow-wrap: normal;
        word-break: normal;
        hyphens: none;
        max-width: 100%;
        line-height: 0.9;
        margin-bottom: 1rem;
      }
      .card-model-a blockquote {
        line-height: 1.2;
      }
      .message-box {
        margin-top: 50px !important;
        margin-bottom: 50px !important;
      }
      .card-model-a blockquote span {
        word-wrap: break-word;
        overflow-wrap: break-word;
        hyphens: auto;
        max-width: 100%;
        display: inline-block;
      }
      .card-model-a img {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative !important;
        z-index: 2 !important;
      }
      .carousel-image {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative !important;
        z-index: 2 !important;
      }
      .music-player-fixed {
        position: fixed !important;
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        z-index: 9999 !important;
        width: 100% !important;
        height: auto !important;
        background: transparent !important;
      }
      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
      .animate-pulse {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      .animate-spin {
        animation: spin 1s linear infinite;
      }
      .carousel-image {
        transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .carousel-container:hover .carousel-image {
        transform: scale(1.02);
      }
      .carousel-glow {
        box-shadow: 0 0 30px rgba(236, 72, 153, 0.3),
          0 0 60px rgba(220, 38, 38, 0.2), 0 0 90px rgba(239, 68, 68, 0.1);
      }
      .carousel-modern-border {
        border: 3px solid transparent;
        background: linear-gradient(var(--bg, #1a1a2e), var(--bg, #1a1a2e))
            padding-box,
          linear-gradient(
              135deg,
              rgba(236, 72, 153, 0.6),
              rgba(220, 38, 38, 0.6),
              rgba(239, 68, 68, 0.6)
            )
            border-box;
      }
      @keyframes shimmer {
        0% {
          background-position: -1000px 0;
        }
        100% {
          background-position: 1000px 0;
        }
      }
      .carousel-shimmer {
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        background-size: 1000px 100%;
        animation: shimmer 3s infinite;
      }
      .nav-button {
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4),
          inset 0 1px 1px rgba(255, 255, 255, 0.1);
      }
      .nav-button:hover {
        box-shadow: 0 12px 40px rgba(236, 72, 153, 0.4),
          inset 0 1px 1px rgba(255, 255, 255, 0.2);
      }
      .indicator-dot {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .indicator-dot.active {
        width: 2rem !important;
      }
      .indicator-dot.active {
        box-shadow: 0 0 20px rgba(236, 72, 153, 0.6),
          0 0 40px rgba(220, 38, 38, 0.4);
      }
      .touch-none {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        user-select: none;
      }
      .carousel-container {
        -webkit-overflow-scrolling: touch;
      }
      @media (hover: none) and (pointer: coarse) {
        .nav-button {
          opacity: 1 !important;
        }
        .carousel-shimmer {
          opacity: 0 !important;
        }
      }
      /* Anima√ß√µes para abertura de presente */
      @keyframes heartBeat {
        0%,
        100% {
          transform: scale(1);
        }
        25% {
          transform: scale(1.1);
        }
        50% {
          transform: scale(1.05);
        }
        75% {
          transform: scale(1.08);
        }
      }
      @keyframes heartOpen {
        0% {
          transform: scale(1) rotateZ(0deg);
        }
        50% {
          transform: scale(1.3) rotateZ(180deg);
        }
        100% {
          transform: scale(0) rotateZ(360deg);
          opacity: 0;
        }
      }
      @keyframes ribbonFloat {
        0%,
        100% {
          transform: translateY(0) rotate(-5deg);
        }
        50% {
          transform: translateY(-10px) rotate(5deg);
        }
      }
      @keyframes sparkle {
        0%,
        100% {
          opacity: 0;
          transform: scale(0);
        }
        50% {
          opacity: 1;
          transform: scale(1);
        }
      }
      @keyframes fadeInCard {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }
      .heart-gift {
        animation: heartBeat 1.2s ease-in-out infinite;
      }
      .heart-gift.opening {
        animation: heartOpen 1s ease-in-out forwards;
      }
      .heart-ribbon {
        animation: ribbonFloat 2s ease-in-out infinite;
      }
      .sparkle {
        animation: sparkle 1s ease-in-out infinite;
      }
      .card-reveal {
        animation: fadeInCard 1s ease-out forwards;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useCallback, useRef, useMemo } = React;

      // √çcones SVG para Play e Pause
      const PlayIcon = ({ size = 22 }) => (
        <svg
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        >
          <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
      );

      const PauseIcon = ({ size = 22 }) => (
        <svg
          width={size}
          height={size}
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
        >
          <rect x="6" y="4" width="4" height="16"></rect>
          <rect x="14" y="4" width="4" height="16"></rect>
        </svg>
      );

      // Fun√ß√£o para filtrar fotos v√°lidas
      const filterValidPhotos = (list) =>
        (list ?? []).filter((photo) => {
          if (typeof photo !== "string") return false;
          const trimmed = photo.trim();
          if (!trimmed) return false;
          const lower = trimmed.toLowerCase();
          return (
            !lower.includes("placeholder") && !lower.includes("placehold.co")
          );
        });

      // Componente RelationshipCounter
      const formatDateLocal = (dateString) => {
        if (
          typeof dateString === "string" &&
          /^\d{4}-\d{2}-\d{2}$/.test(dateString)
        ) {
          const [year, month, day] = dateString.split("-").map(Number);
          const localDate = new Date(year, month - 1, day);
          return localDate.toLocaleDateString("pt-BR");
        }
        return new Date(dateString).toLocaleDateString("pt-BR");
      };

      function RelationshipCounter({ startDate, theme = "light" }) {
        const [timeElapsed, setTimeElapsed] = useState({
          years: 0,
          months: 0,
          days: 0,
          hours: 0,
          minutes: 0,
          seconds: 0,
        });

        useEffect(() => {
          if (!startDate) return;

          const calculateTimeElapsed = () => {
            const start = new Date(startDate);
            const now = new Date();
            const diff = now - start;

            if (diff < 0) {
              setTimeElapsed({
                years: 0,
                months: 0,
                days: 0,
                hours: 0,
                minutes: 0,
                seconds: 0,
              });
              return;
            }

            const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25));
            const months = Math.floor(
              (diff % (1000 * 60 * 60 * 24 * 365.25)) /
                (1000 * 60 * 60 * 24 * 30.44)
            );
            const days = Math.floor(
              (diff % (1000 * 60 * 60 * 24 * 30.44)) / (1000 * 60 * 60 * 24)
            );
            const hours = Math.floor(
              (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
            );
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            setTimeElapsed({
              years,
              months,
              days,
              hours,
              minutes,
              seconds,
            });
          };

          calculateTimeElapsed();
          const interval = setInterval(calculateTimeElapsed, 1000);

          return () => clearInterval(interval);
        }, [startDate]);

        if (!startDate) return null;

        const isDark = theme === "dark";

        return (
          <div className="relationship-counter-container relative z-10 text-center mt-3 px-2 md:px-0 w-[85%] md:w-[50%] mx-auto">
            <div
              className={`${
                isDark
                  ? "bg-black/80 border-gray-700/30"
                  : "bg-white/90 border-purple-200"
              } backdrop-blur-sm rounded-2xl p-4 shadow-lg border`}
            >
              <h3
                className={`text-2xl md:text-3xl font-bold ${
                  isDark ? "text-purple-300" : "text-purple-400"
                } mb-4 font-serif`}
              >
                üíï Tempo juntos üíï
              </h3>

              <div className="relationship-counter-grid">
                <div className="text-center p-2">
                  <div
                    className={`text-4xl sm:text-5xl md:text-6xl font-bold ${
                      isDark ? "text-purple-300" : "text-purple-400"
                    }`}
                  >
                    {timeElapsed.years}
                  </div>
                  <div
                    className={`text-lg sm:text-xl md:text-2xl ${
                      isDark ? "text-purple-200" : "text-purple-300"
                    } font-medium`}
                  >
                    {timeElapsed.years === 1 ? "Ano" : "Anos"}
                  </div>
                </div>

                <div className="text-center p-2">
                  <div
                    className={`text-4xl sm:text-5xl md:text-6xl font-bold ${
                      isDark ? "text-purple-300" : "text-purple-400"
                    }`}
                  >
                    {timeElapsed.months}
                  </div>
                  <div
                    className={`text-lg sm:text-xl md:text-2xl ${
                      isDark ? "text-purple-200" : "text-purple-300"
                    } font-medium`}
                  >
                    {timeElapsed.months === 1 ? "M√™s" : "Meses"}
                  </div>
                </div>

                <div className="text-center p-2">
                  <div
                    className={`text-4xl sm:text-5xl md:text-6xl font-bold ${
                      isDark ? "text-purple-300" : "text-purple-400"
                    }`}
                  >
                    {timeElapsed.days}
                  </div>
                  <div
                    className={`text-lg sm:text-xl md:text-2xl ${
                      isDark ? "text-purple-200" : "text-purple-300"
                    } font-medium`}
                  >
                    {timeElapsed.days === 1 ? "Dia" : "Dias"}
                  </div>
                </div>

                <div className="text-center p-2">
                  <div
                    className={`text-4xl sm:text-5xl md:text-6xl font-bold ${
                      isDark ? "text-purple-300" : "text-purple-400"
                    }`}
                  >
                    {timeElapsed.hours}
                  </div>
                  <div
                    className={`text-lg sm:text-xl md:text-2xl ${
                      isDark ? "text-purple-200" : "text-purple-300"
                    } font-medium`}
                  >
                    {timeElapsed.hours === 1 ? "Hora" : "Horas"}
                  </div>
                </div>

                <div className="text-center p-2">
                  <div
                    className={`text-4xl sm:text-5xl md:text-6xl font-bold ${
                      isDark ? "text-purple-300" : "text-purple-400"
                    }`}
                  >
                    {timeElapsed.minutes}
                  </div>
                  <div
                    className={`text-lg sm:text-xl md:text-2xl ${
                      isDark ? "text-purple-200" : "text-purple-300"
                    } font-medium`}
                  >
                    {timeElapsed.minutes === 1 ? "Minuto" : "Minutos"}
                  </div>
                </div>

                <div className="text-center p-2">
                  <div
                    className={`text-4xl sm:text-5xl md:text-6xl font-bold ${
                      isDark ? "text-purple-300" : "text-purple-400"
                    }`}
                  >
                    {timeElapsed.seconds}
                  </div>
                  <div
                    className={`text-lg sm:text-xl md:text-2xl ${
                      isDark ? "text-purple-200" : "text-purple-300"
                    } font-medium`}
                  >
                    {timeElapsed.seconds === 1 ? "Segundo" : "Segundos"}
                  </div>
                </div>
              </div>

              <div
                className={`mt-6 text-lg md:text-xl ${
                  isDark ? "text-purple-200" : "text-purple-300"
                } font-medium`}
              >
                Desde {formatDateLocal(startDate)}
              </div>
            </div>
          </div>
        );
      }

      // Componente DarkMusicPlayer
      function DarkMusicPlayer({ track }) {
        const audioRef = useRef(null);
        const [isPlaying, setIsPlaying] = useState(false);

        const togglePlay = () => {
          if (!audioRef.current) return;
          if (isPlaying) {
            audioRef.current.pause();
          } else {
            audioRef.current.play();
          }
          setIsPlaying(!isPlaying);
        };

        return (
          <div
            className="w-full max-w-md md:max-w-xl lg:max-w-2xl xl:max-w-3xl mx-auto bg-gradient-to-br from-black/80 via-black/70 to-purple-950/40 backdrop-blur-md rounded-xl p-4 md:p-6 lg:p-7 xl:p-9 shadow-2xl border border-purple-600/20 relative overflow-hidden dark-player"
            style={{
              backdropFilter: "blur(12px)",
              WebkitBackdropFilter: "blur(12px)",
            }}
          >
            <div className="absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-gray-800/10 to-gray-700/10 rounded-full -translate-y-8 translate-x-8 blur-xl"></div>
            <div className="absolute bottom-0 left-0 w-12 h-12 bg-gradient-to-tr from-gray-800/10 to-gray-700/10 rounded-full translate-y-6 -translate-x-6 blur-xl"></div>
            <div className="absolute inset-0 bg-gradient-to-t from-black/10 to-transparent"></div>

            <div className="relative z-10 flex items-center gap-3">
              <div className="relative">
                <img
                  src={track.album?.cover_small || "img/logo.png"}
                  alt={track.title}
                  className="w-12 h-12 md:w-16 md:h-16 lg:w-20 lg:h-20 rounded-lg shadow-2xl border-2 border-gray-700/40 ring-1 ring-gray-700/20"
                  onError={(e) => {
                    e.target.src = "img/logo.png";
                  }}
                />
                <div className="absolute inset-0 rounded-lg bg-gradient-to-br from-purple-500/5 to-violet-500/5"></div>
                {isPlaying && (
                  <div className="absolute inset-0 rounded-lg bg-gradient-to-br from-purple-500/10 to-violet-500/10 animate-pulse"></div>
                )}
              </div>

              <div className="flex-1 min-w-0">
                <p className="font-bold text-purple-200 text-sm md:text-base lg:text-lg font-serif truncate drop-shadow-[0_2px_4px_rgba(0,0,0,0.5)]">
                  {track.title}
                </p>
                <p className="text-xs md:text-sm lg:text-base text-purple-300/60 font-medium truncate mt-0.5">
                  {track.artist.name}
                </p>
              </div>

              <button
                onClick={togglePlay}
                className="bg-gradient-to-r from-purple-500 to-violet-600 hover:from-purple-600 hover:to-violet-700 active:from-purple-700 active:to-violet-800 shadow-lg shadow-purple-500/30 transition-all duration-300 transform hover:scale-110 active:scale-95 ring-2 ring-purple-500/30 hover:ring-purple-500/50 rounded-full w-10 h-10 md:w-12 md:h-12 lg:w-14 lg:h-14 flex items-center justify-center"
              >
                {isPlaying ? <PauseIcon size={22} /> : <PlayIcon size={22} />}
              </button>
            </div>

            <audio ref={audioRef} src={track.preview}></audio>
          </div>
        );
      }

      // Componente MeteorHearts
      function MeteorHearts() {
        const [hearts, setHearts] = useState([]);
        const heartIdRef = useRef(0);
        const containerRef = useRef(null);
        const heartsRef = useRef([]);
        const animationFrameRef = useRef(null);
        const isMountedRef = useRef(true);

        useEffect(() => {
          isMountedRef.current = true;

          const heartEmojis = [
            "üíï",
            "üíñ",
            "üíó",
            "üíò",
            "üíù",
            "üíû",
            "‚ù§Ô∏è",
            "üíú",
            "ü§ç",
          ];

          const createHeart = (initialY = null) => {
            const id = heartIdRef.current++;
            const x = Math.random() * 100;
            const size = Math.random() * 20 + 15;
            const speed = Math.random() * 0.07 + 0.05;
            const startTime = Date.now();
            const containerHeight =
              containerRef.current?.clientHeight || window.innerHeight;

            return {
              id,
              x,
              size,
              speed,
              startTime,
              startY: initialY !== null ? initialY : -100,
              containerHeight,
              emoji:
                heartEmojis[Math.floor(Math.random() * heartEmojis.length)],
              color:
                Math.random() > 0.5 ? "text-purple-700" : "text-purple-600",
            };
          };

          // Criar cora√ß√µes iniciais distribu√≠dos pela tela
          const containerHeight =
            containerRef.current?.clientHeight || window.innerHeight;
          const initialHearts = [];
          const initialCount = 15; // N√∫mero de cora√ß√µes iniciais

          for (let i = 0; i < initialCount; i++) {
            const initialY = Math.random() * containerHeight;
            initialHearts.push(createHeart(initialY));
          }

          heartsRef.current = initialHearts;
          if (isMountedRef.current) {
            setHearts([...heartsRef.current]);
          }

          const createInterval = setInterval(() => {
            if (!isMountedRef.current) return;
            const count = Math.floor(Math.random() * 2) + 1;
            const newHearts = Array.from({ length: count }, () =>
              createHeart()
            );

            heartsRef.current = [...heartsRef.current, ...newHearts].slice(-80);
            if (isMountedRef.current) {
              setHearts([...heartsRef.current]);
            }
          }, 1500);

          const animate = () => {
            if (!isMountedRef.current) return;

            const now = Date.now();
            const containerHeight =
              containerRef.current?.clientHeight || window.innerHeight;

            heartsRef.current = heartsRef.current
              .map((heart) => {
                const elapsed = (now - heart.startTime) / 1000;
                const heartContainerHeight =
                  heart.containerHeight || containerHeight;
                const y =
                  heart.startY + elapsed * heart.speed * heartContainerHeight;

                if (y > heartContainerHeight + 50) {
                  return null;
                }

                let opacity = 1;
                if (y < 0) {
                  opacity = 1;
                } else if (y > heartContainerHeight - 50) {
                  opacity = Math.max(0, (heartContainerHeight - y) / 50);
                }

                return {
                  ...heart,
                  currentY: y,
                  opacity: opacity,
                };
              })
              .filter(Boolean);

            if (isMountedRef.current) {
              setHearts([...heartsRef.current]);
              animationFrameRef.current = requestAnimationFrame(animate);
            }
          };

          animationFrameRef.current = requestAnimationFrame(animate);

          return () => {
            isMountedRef.current = false;
            clearInterval(createInterval);
            if (animationFrameRef.current) {
              cancelAnimationFrame(animationFrameRef.current);
              animationFrameRef.current = null;
            }
          };
        }, []);

        return (
          <div
            ref={containerRef}
            className="absolute inset-0 pointer-events-none overflow-hidden z-0"
          >
            {hearts.map((heart) => (
              <div
                key={heart.id}
                className={`absolute ${heart.color}`}
                style={{
                  left: `${heart.x}%`,
                  transform: `translateY(${heart.currentY || heart.startY}px)`,
                  fontSize: `${heart.size}px`,
                  opacity: heart.opacity !== undefined ? heart.opacity : 1,
                  willChange: "transform",
                  backfaceVisibility: "hidden",
                  WebkitBackfaceVisibility: "hidden",
                }}
              >
                {heart.emoji}
              </div>
            ))}
          </div>
        );
      }

      // Componente CardModelA
      function CardModelA({
        name,
        message,
        photos,
        music,
        startDate,
        showMusicPlayer = true,
      }) {
        const validPhotos = useMemo(() => {
          const filtered = filterValidPhotos(photos);
          console.log("Fotos v√°lidas:", filtered);
          console.log("Total de fotos:", photos?.length);
          return filtered;
        }, [photos]);
        const [current, setCurrent] = useState(0);
        const [isAutoPlaying, setIsAutoPlaying] = useState(true);
        const intervalRef = useRef(null);
        const cardContainerRef = useRef(null);
        const overlayRef = useRef(null);
        const touchStartX = useRef(0);
        const touchEndX = useRef(0);
        const carouselRef = useRef(null);

        const next = useCallback(
          () => setCurrent((c) => (c + 1) % validPhotos.length),
          [validPhotos.length]
        );
        const prev = useCallback(
          () =>
            setCurrent(
              (c) => (c - 1 + validPhotos.length) % validPhotos.length
            ),
          [validPhotos.length]
        );

        useEffect(() => {
          if (validPhotos.length === 0 && current !== 0) {
            setCurrent(0);
          } else if (validPhotos.length > 0 && current >= validPhotos.length) {
            setCurrent(0);
          }
        }, [validPhotos.length, current]);

        const goToSlide = (index) => {
          setCurrent(index);
          resetAutoPlay();
        };

        const resetAutoPlay = () => {
          setIsAutoPlaying(false);
          if (intervalRef.current) {
            clearInterval(intervalRef.current);
          }
          setTimeout(() => {
            setIsAutoPlaying(true);
          }, 3000);
        };

        useEffect(() => {
          if (validPhotos.length > 1 && isAutoPlaying) {
            intervalRef.current = setInterval(() => {
              setCurrent((c) => (c + 1) % validPhotos.length);
            }, 4000);
          }

          return () => {
            if (intervalRef.current) {
              clearInterval(intervalRef.current);
            }
          };
        }, [validPhotos.length, isAutoPlaying]);

        const handleMouseEnter = () => {
          setIsAutoPlaying(false);
          if (intervalRef.current) {
            clearInterval(intervalRef.current);
          }
        };

        const handleMouseLeave = () => {
          setIsAutoPlaying(true);
        };

        // Handlers para swipe mobile
        const handleTouchStart = (e) => {
          touchStartX.current = e.touches[0].clientX;
          setIsAutoPlaying(false);
          if (intervalRef.current) {
            clearInterval(intervalRef.current);
          }
        };

        const handleTouchMove = (e) => {
          // Prevenir scroll da p√°gina durante o swipe
          e.preventDefault();
        };

        const handleTouchEnd = (e) => {
          touchEndX.current = e.changedTouches[0].clientX;
          const diff = touchStartX.current - touchEndX.current;
          const minSwipeDistance = 50;

          if (Math.abs(diff) > minSwipeDistance) {
            if (diff > 0) {
              next();
            } else {
              prev();
            }
          }

          setTimeout(() => {
            setIsAutoPlaying(true);
          }, 3000);
        };

        return (
          <>
            <div
              ref={cardContainerRef}
              className="card-model-a rounded-none md:rounded-3xl p-4 md:p-8 space-y-[1.1rem] md:space-y-[1.65rem] bg-gradient-to-br from-black via-black to-purple-950/50 shadow-2xl border-0 md:border border-purple-600/20 backdrop-blur-sm flex flex-col justify-start pt-8 md:pt-12 pb-5 relative"
            >
              <div
                ref={overlayRef}
                className="absolute top-0 left-0 right-0 bg-black/40 z-10 pointer-events-none"
              ></div>

              {name && (
                <div className="relative z-20 text-center px-4 md:px-0 mt-8">
                  <div className="inline-block overflow-hidden mx-auto w-[95dvw] max-w-full">
                    <h1 className="font-black text-4xl text-purple-300 mb-3 font-serif italic tracking-wide whitespace-normal leading-tight px-2">
                      {name}
                    </h1>
                    <div className="h-1 w-16 md:w-20 bg-gradient-to-r from-purple-400/60 to-violet-400/60 mx-auto rounded-full"></div>
                  </div>
                </div>
              )}

              {validPhotos.length > 0 && (
                <div
                  className="relative z-20 w-[70dvw] md:w-[35%] max-w-full mx-auto px-4 md:px-0 mt-3"
                  onMouseEnter={handleMouseEnter}
                  onMouseLeave={handleMouseLeave}
                >
                  <div className="relative rounded-3xl overflow-hidden border-2 border-gray-800/50 shadow-2xl bg-black">
                    <div
                      className="relative w-full aspect-[9/16] overflow-hidden"
                      ref={carouselRef}
                      onTouchStart={handleTouchStart}
                      onTouchMove={handleTouchMove}
                      onTouchEnd={handleTouchEnd}
                      style={{ touchAction: "pan-x" }}
                    >
                      <div
                        className="flex h-full transition-transform duration-400 ease-in-out"
                        style={{
                          transform: `translateX(-${current * 100}%)`,
                        }}
                      >
                        {validPhotos.map((photo, index) => (
                          <div
                            key={index}
                            className="w-full flex-shrink-0 h-full"
                          >
                            <img
                              src={photo}
                              alt={`Foto ${index + 1}`}
                              className="w-full h-full object-cover"
                              onError={(e) => {
                                console.error(
                                  "Erro ao carregar imagem:",
                                  photo
                                );
                              }}
                              onLoad={() =>
                                console.log("Imagem carregada:", photo)
                              }
                            />
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>

                  {/* Indicadores */}
                  <div className="flex justify-center mt-6 gap-2">
                    {validPhotos.map((_, i) => (
                      <button
                        key={i}
                        onClick={() => goToSlide(i)}
                        className={`rounded-full transition-all duration-300 ${
                          i === current
                            ? "bg-purple-500 w-8 h-3"
                            : "bg-gray-700 w-3 h-3 hover:bg-purple-700/50"
                        }`}
                      />
                    ))}
                  </div>
                </div>
              )}

              {message && (
                <blockquote
                  className="relative z-20 text-center text-xl sm:text-2xl md:text-3xl lg:text-2xl text-purple-200 leading-relaxed font-serif italic px-4 md:px-0 w-[90%] md:w-[40%] self-center message-box"
                  style={{ marginTop: "50px", marginBottom: "50px" }}
                >
                  <div className="relative">
                    <span className="text-3xl sm:text-3xl md:text-4xl lg:text-5xl text-purple-300/60 absolute left-0 sm:left-0 md:-left-6 lg:-left-8 -top-4 sm:-top-6 font-serif">
                      "
                    </span>
                    <span className=" relative z-20 font-light tracking-wide hyphens-auto px-4 md:px-8 lg:px-12">
                      {message}
                    </span>
                    <span className="text-3xl sm:text-3xl md:text-4xl lg:text-5xl text-purple-300/60 absolute right-0 sm:right-0 md:-right-6 lg:-right-8 -bottom-4 sm:-bottom-6 font-serif">
                      "
                    </span>
                  </div>
                </blockquote>
              )}

              {startDate && (
                <div className="mt-3 relative z-20 pb-28 md:pb-20">
                  <RelationshipCounter startDate={startDate} theme="dark" />
                  <div className="text-center -mt-20 px-4">
                    <p className="text-gray-200 text-lg md:text-xl font-serif italic">
                      Seu amor foi sempre muito mais do que eu sonhei pra mim!
                    </p>
                  </div>
                </div>
              )}

              <MeteorHearts />
            </div>

            {music && showMusicPlayer && (
              <div className="max-w-md mx-auto music-player-fixed p-4 bg-gradient-to-t from-black/95 via-black/90 to-transparent">
                <DarkMusicPlayer track={music} />
              </div>
            )}
          </>
        );
      }

      // Dados de exemplo
      const demoData = {
        name: "Ana & Jo√£o",
        message:
          "Juntos construindo sonhos e mem√≥rias para toda a vida. Cada momento ao seu lado √© uma nova descoberta do amor.",
        photos: [
          "img/Design sem nome.png",
          "img/pexels-asadphoto-1024975.jpg",
          "img/pexels-jasminecarter-888894.jpg",
        ],
        music: {
          id: 1470102898,
          title: "Entregador de Flor",
          artist: {
            name: "Diego & Victor Hugo",
          },
          album: {
            cover_small: "img/logo.png",
          },
          preview: "https://cdns-preview-1.dzcdn.net/stream/c-1470102898-2.mp3",
        },
        startDate: "2020-03-14",
        showMusicPlayer: true,
      };

      // Componente de Abertura de Presente
      function GiftOpeningScreen({ onOpen }) {
        const [isOpening, setIsOpening] = useState(false);

        const handleOpen = () => {
          if (isOpening) return;
          setIsOpening(true);
          setTimeout(() => {
            onOpen();
          }, 500);
        };

        return (
          <div
            className={`min-h-[100dvh] bg-gradient-to-br from-black via-black to-purple-950/30 flex items-center justify-center transition-opacity duration-500 ${
              isOpening ? "opacity-0" : "opacity-100"
            }`}
            onClick={handleOpen}
            style={{ cursor: isOpening ? "default" : "pointer" }}
          >
            <div className="text-center px-4 flex flex-col items-center justify-center min-h-[100dvh] relative w-full">
              <div className="flex-1 flex flex-col items-center justify-center pb-24">
                <div className="mb-8">
                  <h2 className="text-3xl md:text-4xl font-bold text-purple-300 mb-4 font-serif">
                    Voc√™ tem um presente!
                  </h2>
                  <p className="text-purple-200 text-lg md:text-xl mb-8">
                    Toque para abrir
                  </p>
                </div>

                <div className="text-9xl md:text-[12rem] animate-pulse">üéÅ</div>

                <div className="mt-8 text-purple-300/60 text-sm md:text-base">
                  üëÜ Toque em qualquer lugar
                </div>
              </div>

              <div className="absolute bottom-6 md:bottom-8 left-0 right-0 flex justify-center px-4">
                <img
                  src="img/logo.png"
                  alt="Logo"
                  className="max-w-[80px] md:max-w-[100px] h-auto opacity-80 hover:opacity-100 transition-opacity duration-300"
                />
              </div>
            </div>
          </div>
        );
      }

      // Componente Demo
      function Demo() {
        const [isGiftOpened, setIsGiftOpened] = useState(false);

        if (!isGiftOpened) {
          return <GiftOpeningScreen onOpen={() => setIsGiftOpened(true)} />;
        }

        return (
          <div className="min-h-[100dvh] bg-gradient-to-br from-black via-black to-purple-950/30">
            <CardModelA {...demoData} />
          </div>
        );
      }

      // Renderizar
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<Demo />);
    </script>
  </body>
</html>
